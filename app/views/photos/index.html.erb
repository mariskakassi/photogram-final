<h1>List of photos</h1>

<form action="/insert_photo_record" method="post">
  <label for="browser_input">Image</label>
  <input id="browser_input" type="text" name="input_image" placeholder="Enter a URL for the image">

  <label for="browser_caption">Caption</label>
  <textarea id="browser_caption" name="input_caption" placeholder="Enter a caption for the photo"></textarea>

  <input id="browser_user_id" type="text" name="input_owner_id" hidden="hidden">

  <button>Add photo</button>
</form>

<hr>

<table border="1">
  <tr>
    <th>
      Image
    </th>

    <th>
      Caption
    </th>

    <th>
      Owner
    </th>

    <th>
      Posted
    </th>

    <th>
      Likes
    </th>

    <td>
    </td>
  </tr>
  <% years = 0 %>
  <% months = 0 %>
  <% @list_of_photos.each do |a_photo| %>

    <tr>
      <td>
        <img src="<%= a_photo.image %>" height="300px">
      </td>

      <td>
        <%= a_photo.caption %>
      </td>

      <td>
        <%= a_photo.poster.username %>
      </td>

      <td>
        <% years = DateTime.now().year - a_photo.created_at.year%>
        <% months = a_photo.created_at.month %>
        <% if months < 3 %>
          about <%= years %> years ago
        <% elsif months < 9 %>
          over <%= years %> years ago
        <% else %>
          almost <%= years + 1 %> years ago
        <% end %>
      </td>

      <td>
        <%= a_photo.likes_count %>
      </td>

      <td>
        <a href="/photos/<%= a_photo.id %>">
          Show details
        </a>
      </td>
    </tr>
  <% end %>
</table>
